"use strict";(self.webpackChunklead_management_system_dashboard=self.webpackChunklead_management_system_dashboard||[]).push([[7918],{57918:function(e,t,n){var i=n(74165),o=n(15861),l=n(29439),r=n(1413),s=n(45987),a=n(47313),d=n(66135),c=n(50301),u=n(94469),p=n(33604),m=n(47131),x=n(24813),h=n(61113),v=n(96467),f=n(9019),g=n(93405),Z=n(73428),j=n(11198),y=n(79429),C=n(3463),w=n(64224),b=(n(5866),n(17592)),_=n(19860),k=(n(61581),n(34229)),D=n.n(k),M=(n(17744),n(27754)),P=n(25486),S=(n(33497),n(66182),n(57201),n(70816)),A=n.n(S),F=(n(56877),n(96862)),Y=n(11692),U=n(14732),W=n(74031),L=n(46417),R=["children","onClose"];var T=a.forwardRef((function(e,t){return(0,L.jsx)(c.Z,(0,r.Z)({direction:"down",ref:t},e))})),z=(0,b.ZP)(u.Z)((function(e){var t=e.theme;return{"& .css-adfesr-MuiModal-root-MuiDialog-root":{maxWidth:"100%"},"& .MuDialogContent-root":{padding:t.spacing(2)},"& .MuDialogActions-root":{padding:t.spacing(1)}}})),B=function(e){var t=e.children,n=e.onClose,i=(0,s.Z)(e,R);return(0,L.jsxs)(p.Z,(0,r.Z)((0,r.Z)({sx:{m:0,py:1,px:2,display:"flex"}},i),{},{children:[t,n?(0,L.jsx)(m.Z,{"aria-label":"close",onClick:n,sx:{position:"absolute",right:10,top:10,color:function(e){return e.palette.grey[500]}},children:(0,L.jsx)(j.Z,{})}):null]}))};t.Z=(0,d.$j)(null,{GetFollowUpsDetailApi:M.ec})((function(e){var t,n,r,s,c,u,p,m,j,b=(0,_.Z)(),k=((0,x.Z)(b.breakpoints.down("sm")),(0,d.v9)((function(e){return e.clusterLeadAction}))),S=k.getFollowUpsCallsDetails,R=k.getFollowUpsCallsDetailsLoading,I={p:2.5,border:"1px solid ",borderColor:"dark"===b.palette.mode?b.palette.dark.main:b.palette.grey[200]},q=e.open,N=e.close,O=(e.AddCommentLeadActivityApi,e.rowData,e.leadId),E=(0,d.v9)((function(e){return e.clusterLeadAction})),V=E.getLeadActivityData,G=(E.getLeadActivityLoading,(0,P.Z)().borderRadius,a.useState(0)),$=(0,l.Z)(G,2),H=($[0],$[1],(0,a.useState)(!1)),J=(0,l.Z)(H,2),K=(J[0],J[1],(0,a.useState)([])),Q=(0,l.Z)(K,2),X=(Q[0],Q[1]),ee=(0,a.useState)(""),te=(0,l.Z)(ee,2),ne=(te[0],te[1]),ie=(0,a.useState)(["",""]),oe=(0,l.Z)(ie,2),le=oe[0],re=oe[1];(0,a.useEffect)((function(){var e;(null===V||void 0===V?void 0:V.length)>0&&(X(V[0]),ne(null===(e=V[0])||void 0===e?void 0:e._id))}),[V]);var se=C.Ry({new_Comment:C.Z_().required("Comment Field is Required")}),ae=((0,y.TA)({enableReinitialize:!0,initialValues:{new_Comment:""},onSubmit:function(e,t){t.setSubmitting,t.resetForm,e.new_Comment},validationSchema:se}),function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t){var n,o;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t?A()(t[0]).format("YYYY-MM-DD"):"",o=t?A()(t[1]).format("YYYY-MM-DD"):"",e.next=4,(0,w.WI)((0,M.ec)(O,n,o));case 4:re(t);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),de=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t){var n,o;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(re(t),!(t.length>0)){e.next=6;break}return n=t?A()(t[0]).format("YYYY-MM-DD"):"",o=t?A()(t[1]).format("YYYY-MM-DD"):"",e.next=6,(0,w.WI)((0,M.ec)(O,n,o));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,L.jsx)("div",{children:(0,L.jsxs)(z,{open:q,TransitionComponent:T,maxWidth:"xl",fullWidth:!0,sx:{"& .MuiDialog-paper":{width:"100%",maxWidth:"750px",height:"650px"}},children:[(0,L.jsx)(B,{id:"customized-dialog-title",onClose:function(){N()},children:(0,L.jsx)(h.Z,{variant:"h6",component:"h6",sx:{pl:"10px",fontSize:"1em"},children:"Follow-Ups Calls Details"})}),(0,L.jsx)(D(),{component:"div",style:{scrollbarWidth:"thin",scrollbarColor:"#b2b3b3 #f1f1f1",maxWidth:"100%"},children:(0,L.jsx)(v.Z,{dividers:!0,sx:{px:0},children:(0,L.jsxs)(f.ZP,{container:!0,spacing:1,children:[(0,L.jsx)(f.ZP,{item:!0,xs:12,md:12,lg:12,sx:{display:"flex",justifyContent:"center",alignContent:"center",my:1},children:(0,L.jsx)(U.Z,{showOneCalendar:!0,size:"lg",placeholder:"Please Select Date-Range",className:"w-100 input d-inline",character:" -To- ",block:!0,value:le,cleanable:!0,onOk:ae,onChange:de,format:"dd-MMM-yyyy",onKeyDown:function(e){return e.preventDefault()},ranges:W.rQ,style:{borderRadius:"10px !important"},container:function(){return document.body}})}),(0,L.jsxs)(f.ZP,{item:!0,xs:12,sx:{"&.MuiGrid-root":{pt:"0px"}},children:[(0,L.jsxs)(f.ZP,{container:!0,alignItems:"center",spacing:0,children:[(0,L.jsx)(f.ZP,{item:!0,xs:12,sm:3,sx:I}),(0,L.jsxs)(f.ZP,{item:!0,xs:12,sm:6,sx:I,children:[" ",(0,L.jsx)(F.Z,{title:"Total Paid Users",primary:(null===S||void 0===S||null===(t=S.totalCalls)||void 0===t?void 0:t.length)>0&&null!==S&&void 0!==S&&S.totalCalls?null===S||void 0===S||null===(n=S.totalCalls[0])||void 0===n?void 0:n.count:0,secondary:"Total Follow Up Calls",color:b.palette.error.main,type:1})]}),(0,L.jsx)(f.ZP,{item:!0,xs:12,sm:3,sx:I}),(0,L.jsx)(f.ZP,{item:!0,xs:12,sm:4,sx:I,children:(0,L.jsx)(F.Z,{title:"Total Paid Users",primary:(null===S||void 0===S||null===(r=S.positiveCalls)||void 0===r?void 0:r.length)>0&&null!==S&&void 0!==S&&S.positiveCalls?null===S||void 0===S||null===(s=S.positiveCalls[0])||void 0===s?void 0:s.count:0,secondary:"Picked",color:b.palette.success.main,type:1})}),(0,L.jsx)(f.ZP,{item:!0,xs:12,sm:4,sx:I,children:(0,L.jsx)(F.Z,{title:"Total Paid Users",primary:(null===S||void 0===S||null===(c=S.negativeCalls)||void 0===c?void 0:c.length)>0&&null!==S&&void 0!==S&&S.negativeCalls?null===S||void 0===S||null===(u=S.negativeCalls[0])||void 0===u?void 0:u.count:0,secondary:"Not Picked",color:b.palette.success.main,type:1})}),(0,L.jsx)(f.ZP,{item:!0,xs:12,sm:4,sx:I,children:(0,L.jsx)(F.Z,{title:"Total Paid Users",primary:(null===S||void 0===S||null===(p=S.declinedCalls)||void 0===p?void 0:p.length)>0&&null!==S&&void 0!==S&&S.declinedCalls?null===S||void 0===S||null===(m=S.declinedCalls[0])||void 0===m?void 0:m.count:0,secondary:"Declined",color:b.palette.error.main,type:1})})]}),(0,L.jsx)(g.Z,{sx:{borderLeft:"1px solid",borderColor:"dark"===b.palette.mode?b.palette.background.default:b.palette.grey[200]},children:!R&&(null===S||void 0===S?void 0:S.data.length)>0?null===S||void 0===S||null===(j=S.data)||void 0===j?void 0:j.map((function(e){return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(Z.Z,{sx:{display:"inline-block",bgcolor:"dark"===b.palette.mode?"grey.600":b.palette.primary.light},children:(0,L.jsx)(g.Z,{sx:{p:2,pb:"16px !important",width:"fit-content",ml:"auto"},children:(0,L.jsxs)(f.ZP,{container:!0,spacing:1,children:[(0,L.jsx)(f.ZP,{item:!0,xs:12,children:(0,L.jsx)(h.Z,{variant:"body2",color:"dark"===b.palette.mode?"dark.900":"",children:null!==e&&void 0!==e&&e.comment&&""!==(null===e||void 0===e?void 0:e.comment)?null===e||void 0===e?void 0:e.comment:"No Comment Found"})}),(0,L.jsxs)(f.ZP,{item:!0,xs:12,sx:{display:"flex",justifyContent:"space-between",alignContent:"center"},children:[(0,L.jsxs)(h.Z,{align:"left",variant:"subtitle2",color:"dark"===b.palette.mode?"dark.900":"",sx:{display:"flex",alignItems:"center"},children:[1===(null===e||void 0===e?void 0:e.response)&&"Picked",2===(null===e||void 0===e?void 0:e.response)&&"Not Picked",3===(null===e||void 0===e?void 0:e.response)&&"Declined"]}),(0,L.jsx)(h.Z,{align:"right",variant:"subtitle2",color:"dark"===b.palette.mode?"dark.900":"",children:A()(null===e||void 0===e?void 0:e.createdAt).format("DD-MMM-YYYY hh:mm a")})]})]})})}),(0,L.jsx)("br",{})]})})):(0,L.jsx)(L.Fragment,{children:!0===R?(0,L.jsx)(Y.HN,{}):(0,L.jsx)(h.Z,{variant:"body2",align:"center",color:"dark"===b.palette.mode?"dark.900":"",children:"No Comment Found"})})})]})]})})})]})})}))},56877:function(e,t,n){var i=n(45987),o=n(1413),l=n(47313),r=n(66135),s=n(50301),a=n(94469),d=n(33604),c=n(47131),u=n(61113),p=n(96467),m=n(9019),x=n(88797),h=n(51405),v=n(15480),f=n(24631),g=n(9506),Z=n(69099),j=n(85281),y=n(11198),C=n(79429),w=n(3463),b=n(64224),_=n(5866),k=n(17592),D=n(19860),M=(n(61581),n(34229)),P=n.n(M),S=(n(17744),n(27754)),A=n(66182),F=n(46417),Y=["children","onClose"],U=l.forwardRef((function(e,t){return(0,F.jsx)(s.Z,(0,o.Z)({direction:"down",ref:t},e))})),W=(0,k.ZP)(a.Z)((function(e){var t=e.theme;return{"& .css-adfesr-MuiModal-root-MuiDialog-root":{maxWidth:"100%"},"& .MuDialogContent-root":{padding:t.spacing(2)},"& .MuDialogActions-root":{padding:t.spacing(1)}}})),L=function(e){var t=e.children,n=e.onClose,l=(0,i.Z)(e,Y);return(0,F.jsxs)(d.Z,(0,o.Z)((0,o.Z)({sx:{m:0,py:1,px:2}},l),{},{children:[t,n?(0,F.jsx)(c.Z,{"aria-label":"close",onClick:n,sx:{position:"absolute",right:10,top:10,color:function(e){return e.palette.grey[500]}},children:(0,F.jsx)(y.Z,{})}):null]}))};t.Z=(0,r.$j)(null,{UpdateClusterLeadActivityApi:S.By})((function(e){var t=(0,D.Z)(),n=e.open,i=e.close,o=e.UpdateClusterLeadActivityApi,s=e.activityId,a=(0,b.I0)(),d=((0,l.useRef)(null),(0,r.v9)((function(e){return e.masterAction})).leadFollowUpList),c=(0,r.v9)((function(e){return e.businessAction})),y=(c.getLeadActivityData,c.getLeadActivityLoading,w.Ry({follow_ups:w.Z_().required("Follow-Ups Field is Required"),new_Comment:w.Z_().required("Comment Field is Required")})),k=function(e,t){var n=t.setSubmitting,l={lead_activity_id:s,activity_id:e.follow_ups,comment:e.new_Comment};o(l).then((function(e){!0===e.succeeded?(i(),n(!1),a((0,_.ss)({open:!0,message:e.ResponseMessage,variant:"alert",alert:{color:"success"},transition:"Fade",anchorOrigin:{vertical:"top",horizontal:"right"}}))):(n(!1),a((0,_.ss)({open:!0,message:e.ResponseMessage,variant:"alert",alert:{color:"error"},transition:"Fade",anchorOrigin:{vertical:"top",horizontal:"right"}})))})).catch((function(){n(!1)}))},M=(0,C.TA)({initialValues:{follow_ups:"",new_Comment:""},onSubmit:k,validationSchema:y});return(0,F.jsx)("div",{children:(0,F.jsxs)(W,{open:n,TransitionComponent:U,maxWidth:"l",fullWidth:!0,sx:{"& .MuiDialog-paper":{width:"100%",maxWidth:"600px",top:"-100px"}},children:[(0,F.jsx)(L,{id:"customized-dialog-title",onClose:function(){i()},children:(0,F.jsx)(u.Z,{variant:"h6",component:"h6",sx:{pl:"10px",fontSize:"1em"},children:"Change Activity Status"})}),(0,F.jsx)(P(),{component:"div",style:{scrollbarWidth:"thin",scrollbarColor:"#b2b3b3 #f1f1f1",maxWidth:"100%"},children:(0,F.jsx)(p.Z,{dividers:!0,sx:{px:0},children:(0,F.jsx)(C.J9,{onSubmit:k,children:(0,F.jsxs)("form",{noValidate:!0,onSubmit:M.handleSubmit,children:[(0,F.jsxs)(m.ZP,{container:!0,spacing:2,sx:{p:"10px 30px"},children:[(0,F.jsxs)(m.ZP,{item:!0,xs:12,sx:{mb:0,alignItems:"left"},children:[(0,F.jsxs)(u.Z,{variant:"h5",sx:{width:"180px"},children:["Follow-Ups",(0,F.jsx)("span",{style:{color:"red"},children:"*"})]}),(0,F.jsxs)(x.Z,{fullWidth:!0,name:"follow_ups",value:M.values.follow_ups?M.values.follow_ups:"",onChange:M.handleChange,error:M.touched.follow_ups&&Boolean(M.errors.follow_ups),helperText:M.touched.follow_ups&&M.errors.follow_ups,onBlur:M.handleBlur,displayEmpty:!0,style:{display:"flex",justifyContent:"flex-start",marginBottom:"5px ",marginTop:"5px "},children:[(0,F.jsx)(h.Z,{value:"",children:"Select Follow-Ups Status"}),null===d||void 0===d?void 0:d.map((function(e,t){return(0,F.jsx)(h.Z,{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.status_name},t)}))]}),M.touched.follow_ups&&M.errors.follow_ups&&(0,F.jsx)(v.Z,{error:!0,children:M.errors.follow_ups})]}),(0,F.jsxs)(m.ZP,{item:!0,xs:12,sx:{mb:0,alignItems:"left"},children:[(0,F.jsxs)(u.Z,{variant:"h5",sx:{width:"180px"},children:["Comment",(0,F.jsx)("span",{style:{color:"red"},children:"*"})]}),(0,F.jsx)(f.Z,{fullWidth:!0,placeholder:"Enter Comment",type:"text",style:{display:"flex",justifyContent:"flex-start",marginBottom:"5px ",marginTop:"5px "},name:"new_Comment",value:M.values.new_Comment,onChange:M.handleChange,error:M.touched.new_Comment&&Boolean(M.errors.new_Comment),helperText:M.touched.new_Comment&&M.errors.new_Comment,onBlur:M.handleBlur})]})]}),(0,F.jsx)(g.Z,{style:{display:"flex",justifyContent:"center",width:"100%"},children:(0,F.jsx)(A.Z,{scale:{hover:1.1,tap:.9},children:(0,F.jsx)(Z.Z,{variant:"contained",color:"primary",type:"submit",disabled:M.isSubmitting,sx:{px:5,width:"100%",boxShadow:t.customShadows.primary,":hover":{boxShadow:"none"}},children:M.isSubmitting?(0,F.jsx)(F.Fragment,{children:(0,F.jsx)(j.Z,{color:"inherit",size:20})}):"Update"})})})]})})})})]})})}))}}]);